{
  "id": 0,
  "name": "football",
  "api": {
    "type": "request_multiple_custom",
    "use_loop_as_key": true,
    "steps_value": [
      "Spiele",
      "Tabelle"
    ],
    "requests": [
      {
        "type": "request",
        "url_pattern": "https://www.openligadb.de/api/getmatchdata/bl1"
      },
      {
        "type": "request",
        "url_pattern": "https://www.openligadb.de/api/getbltable/bl1/2019"
      }
    ]
  },
  "transform": [
    {
      "type": "append",
      "key": "_req|Spiele|0|Group|GroupName",
      "new_key": "_req|Spieltag"
    },
    {
      "type": "append",
      "key": "_req|Spiele|0|LeagueName",
      "new_key": "_req|LeagueName"
    },
    {
      "type": "transform_array",
      "array_key": "_req|Spiele",
      "transform": [
        {
          "type": "select",
          "relevant_keys": [
            "Team1|TeamName",
            "Team1|TeamId",
            "Team2|TeamName",
            "Team2|TeamId",
            "MatchResults|0|PointsTeam1",
            "MatchResults|0|PointsTeam2",
            "MatchDateTime",
            "MatchIsFinished"
          ]
        },
        {
          "type": "alias",
          "keys": [
            "_loop|MatchResults|0"
          ],
          "new_keys": [
            "_loop|MatchResults"
          ]
        },
        {
          "type": "copy",
          "keys": [
            "_loop|MatchResults|PointsTeam1",
            "_loop|MatchResults|PointsTeam1",
            "_loop|MatchResults|PointsTeam2",
            "_loop|MatchResults|PointsTeam2"
          ],
          "new_keys": [
            "_loop|Team1|Won",
            "_loop|Team2|Lost",
            "_loop|Team2|Won",
            "_loop|Team1|Lost"
          ]
        },
        {
          "type": "date_format",
          "keys": [
            "_loop|MatchDateTime"
          ],
          "new_keys": [
            "_loop|Matchday"
          ],
          "given_format": "%Y-%m-%dT%H:%M:%S",
          "format": "%a., %d.%m.%Y %H:%M"
        },
        {
          "type": "result",
          "keys": [
            "_loop|MatchResults|PointsTeam1",
            "_loop|MatchResults|PointsTeam2"
          ],
          "new_keys": [
            "_loop|Team1|Result",
            "_loop|Team2|Result"
          ],
          "points": [
            "1",
            "3",
            "0"
          ]
        },
        {
          "type": "add_data",
          "new_key": "_idx|Team1",
          "pattern": "Won"
        },
        {
          "type": "add_data",
          "new_key": "_idx|Team1",
          "pattern": "Lost"
        },
        {
          "type": "add_data",
          "new_key": "_idx|Team2",
          "pattern": "Won"
        },
        {
          "type": "add_data",
          "new_key": "_idx|Team2",
          "pattern": "Lost"
        }
      ]
    },
    {
      "type": "transform_array",
      "array_key": "_req|Tabelle",
      "transform": [
        {
          "type": "select",
          "relevant_keys": [
            "TeamName",
            "TeamInfoId",
            "Points",
            "Won",
            "Lost",
            "GoalDiff"
          ]
        },
        {
          "type": "alias",
          "keys": [
            "_loop|TeamInfoId"
          ],
          "new_keys": [
            "_loop|TeamId"
          ]
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "Result"
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "Points_before"
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "Won_before"
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "Lost_before"
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "GoalDiff_before"
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "Goals_Won"
        },
        {
          "type": "add_data",
          "new_key": "_idx",
          "pattern": "Goals_Lost"
        },
        {
          "type": "copy",
          "key": [
            "_idx|Points",
            "_idx|Won",
            "_idx|Lost",
            "_idx|GoalDiff"
          ],
          "new_key": [
            "_idx|Points_before",
            "_idx|Won_before",
            "_idx|Lost_before",
            "_idx|GoalDiff_before"
          ]
        }
      ]
    },
    {
      "type": "transform_array",
      "array_key": "_req",
      "transform": [
        {
          "type": "compare_and_copy",
          "keys_1": "Tabelle|_idx|TeamId",
          "keys_2": "Spiele|_idx|Team1|TeamId",
          "keys": "Spiele|_idx|Team1|Result",
          "new_keys": "Tabelle|_idx|Result"
        },
        {
          "type": "compare_and_copy",
          "keys_1": "Tabelle|_idx|TeamId",
          "keys_2": "Spiele|_idx|Team2|TeamId",
          "keys": "Spiele|_idx|Team2|Result",
          "new_keys": "Tabelle|_idx|Result"
        },
        {
          "type": "compare_and_copy",
          "keys_1": "Tabelle|_idx|TeamId",
          "keys_2": "Spiele|_idx|Team1|TeamId",
          "keys": "Spiele|_idx|Team1|Won",
          "new_keys": "Tabelle|_idx|Goals_Won"
        },
        {
          "type": "compare_and_copy",
          "keys_1": "Tabelle|_idx|TeamId",
          "keys_2": "Spiele|_idx|Team2|TeamId",
          "keys": "Spiele|_idx|Team2|Won",
          "new_keys": "Tabelle|_idx|Goals_Won"
        },
        {
          "type": "compare_and_copy",
          "keys_1": "Tabelle|_idx|TeamId",
          "keys_2": "Spiele|_idx|Team1|TeamId",
          "keys": "Spiele|_idx|Team1|Lost",
          "new_keys": "Tabelle|_idx|Goals_Lost"
        },
        {
          "type": "compare_and_copy",
          "keys_1": "Tabelle|_idx|TeamId",
          "keys_2": "Spiele|_idx|Team2|TeamId",
          "keys": "Spiele|_idx|Team2|Lost",
          "new_keys": "Tabelle|_idx|Goals_Lost"
        }
      ]
    },
    {
      "type": "transform_array",
      "array_key": "_req|Tabelle",
      "transform": [
        {
          "type": "calculate",
          "action": "subtract",
          "keys": "_idx|Points_before",
          "subtract": "_idx|Result"
        },
        {
          "type": "calculate",
          "action": "subtract",
          "keys": "_idx|Won_before",
          "subtract": "_idx|Goals_Won"
        },
        {
          "type": "calculate",
          "action": "subtract",
          "keys": "_idx|Lost_before",
          "subtract": "_idx|Goals_Lost"
        },
        {
          "type": "calculate",
          "action": "subtract",
          "keys": "_idx|Won_before",
          "new_keys": "_idx|GoalDiff_before",
          "subtract": "_idx|Lost_before"
        }
      ]
    }
  ],
  "images": {
  },
  "audio": {
    "config": {
      "lang": "de",
      "format": "mp3"
    },
    "audios": {
      "a1": {
        "parts": [
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          }
        ]
      },
      "a2": {
        "parts": [
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          },
          {
            "type": "text",
            "pattern": " "
          }
        ]
      }
    }
  },
  "sequence": [
  ],
  "run_config": {
    "testing": {
      "default_value": false,
      "possible_values": [
        true,
        false
      ]
    }
  },
  "presets": {
  }
}