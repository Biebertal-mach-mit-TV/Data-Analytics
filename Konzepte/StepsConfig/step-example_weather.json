{
  "id": 0,
  "name": "name",
  "api": [
    {
      "type": "request_multiple",
      "api_key_name": "test",
      "steps_value": [
        "Kiel",
        "Berlin",
        "Dresden",
        "Hannover",
        "Bremen",
        "Düsseldorf",
        "Frankfurt",
        "Nürnberg",
        "Stuttgart",
        "München",
        "Saarbrücken",
        "Schwerin",
        "Hamburg",
        "Gießen",
        "Konstanz",
        "Magdeburg",
        "Leipzig",
        "Mainz",
        "Regensburg"
      ],
      "use_loop_as_key": true,
      "url": "https://www.test.de?test={_loop}&test1={config.test}&key={_api_key}&city={config.city}"
    }
  ],
  "transform": [
    {
      "type": "transform_array",
      "array_key": "",
      "transform": [
        {
          "type": "select",
          "relevant_keys": [
            "data"
          ]
        },
        {
          "type": "select_range",
          "sub_key": "data",
          "range_start": 0,
          "range_end": 5
        },
        {
          "type": "transform_array",
          "array_key": "data",
          "transform": [
            {
              "type": "select",
              "array_key": "data",
              "relevant_keys": [
                "valid_date",
                "max_temp",
                "min_temp",
                "app_min_temp",
                "app_max_temp",
                "wind_cdir_full",
                "wind_spd",
                "icon",
                "code",
                "sunrise_ts",
                "sunset_ts",
                "rh",
                "pop"
              ]
            },
            {
              "type": "append",
              "key": "max_temp",
              "new_key": "....summaries.{_idx}.max_temp"
            }
          ]
        },
        {
          "type": "add_symbol",
          "keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp"
          ],
          "pattern": "{text} Grad"
        },
        {
          "type": "add_symbol",
          "keys": [
            "wind_spd"
          ],
          "new_keys": [
            "wind_spd"
          ],
          "pattern": "{text} Metern pro Sekunde"
        },
        {
          "type": "add_symbol",
          "keys": [
            "rh",
            "pop"
          ],
          "new_keys": [
            "rh",
            "pop"
          ],
          "pattern": "{text} Prozent"
        },
        {
          "type": "add_symbol",
          "keys": [
            "city_name"
          ],
          "new_keys": [
            "city_name"
          ],
          "pattern": "in {city_name} "
        },
        {
          "type": "replace",
          "keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp",
            "wind_spd",
            "rh",
            "pop"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp",
            "wind_spd",
            "rh",
            "pop"
          ],
          "old_value": ".",
          "new_value": ",",
          "count": 1
        },
        {
          "type": "date_weekday",
          "keys": [
            "valid_date"
          ],
          "new_keys": [
            "valid_date"
          ],
          "format": "weekday"
        },
        {
          "type": "date_format",
          "keys": [
            "sunset_ts",
            "sunrise_ts"
          ],
          "new_keys": [
            "sunset_ts",
            "sunrise_ts"
          ],
          "format": "%h Uhr %m"
        },
        {
          "type": "wind_direction",
          "key": "wind_cdir_full",
          "new_key": "wind_cdir_full",
          "dict": [
            {
              "west": {
                "0": "West",
                "1": "Westen"
              },
              "southwest": {
                "0": "Südwest",
                "1": "Südwesten"
              },
              "northwest": {
                "0": "Nordwest",
                "1": "Nordwesten"
              },
              "south": {
                "0": "Süd",
                "1": "Süden"
              },
              "east": {
                "0": "Ost",
                "1": "Osten"
              },
              "southeast": {
                "0": "Südost",
                "1": "Südosten"
              },
              "northeast": {
                "0": "Nordost",
                "1": "Nordosten"
              },
              "north": {
                "0": "Nord",
                "1": "Norden"
              }
            }
          ],
          "delimiter": "-"
        },
        {
          "type": "choose_random",
          "keys": [
            "code"
          ],
          "new_keys": [
            "code"
          ],
          "dict": [
            {
              "200": {
                "0": "kommt es zu Gewittern mit leichtem Regen",
                "1": "ist mit Gewitter und leichtem Regen zu rechnen",
                "2": "Gewitter"
              },
              "201": {
                "0": "kommt es zu Gewittern mit Regen",
                "1": "ist mit Gewitter und Regen zu rechnen",
                "2": "Gewitter"
              },
              "202": {
                "0": "kommt es zu Gewittern mit starkem Regen",
                "1": "ist mit Gewitter und starkem Regen zu rechnen",
                "2": "Gewitter"
              },
              "230": {
                "0": "kommt es zu Gewittern mit leichtem Nieselregen",
                "1": "ist mit Gewitter und leichtem Nieselregen zu rechnen",
                "2": "Gewitter"
              },
              "231": {
                "0": "kommt es zu Gewittern mit Nieselregen",
                "1": "ist mit Gewitter und Nieselregen zu rechnen",
                "2": "Gewitter"
              },
              "232": {
                "0": "kommt es zu Gewittern mit starkem Nieselregen",
                "1": "ist mit Gewitter und starkem Nieselregen zu rechnen",
                "2": "Gewitter"
              },
              "233": {
                "0": "kommt es zu Gewittern mit Hagel",
                "1": "ist mit Gewitter und Hagel zu rechnen",
                "2": "Gewitter"
              },
              "300": {
                "0": "kommt es zu leichtem Nieselregen",
                "1": "ist mit leichtem Nieselregen zu rechnen",
                "2": "regnerisch"
              },
              "301": {
                "0": "kommt es zu Nieselregen",
                "1": "ist mit Nieselregen zu rechnen",
                "2": "Nieselregen"
              },
              "302": {
                "0": "kommt es zu starkem Nieselregen",
                "1": "ist mit starkem Nieselregen zu rechnen",
                "2": "regnerisch"
              },
              "500": {
                "0": "kommt es zu leichtem Regen",
                "1": "ist es leicht regnerisch",
                "2": "Regen"
              },
              "501": {
                "0": "kommt es zu mäßigem Regen",
                "1": "ist es regnerisch",
                "2": "Regen"
              },
              "502": {
                "0": "kommt es zu starkem Regen",
                "1": "ist es stark regnerisch",
                "2": "Regen"
              },
              "511": {
                "0": "kommt es zu Eisregen",
                "1": "ist mit Eisregen zu rechnen",
                "2": "Eisregen"
              },
              "520": {
                "0": "kommt es zu leichtem Regenschauer",
                "1": "ist mit leichten Regenschauern zu rechnen",
                "2": "Regenschauer"
              },
              "521": {
                "0": "kommt es zu Regenschauer",
                "1": "ist mit Regenschauern zu rechnen",
                "2": "Regenschauer"
              },
              "522": {
                "0": "kommt es zu starkem Regenschauer",
                "1": "ist mit starken Regenschauern zu rechnen",
                "2": "Regenschauer"
              },
              "600": {
                "0": "kommt es zu leichtem Schneefall",
                "1": "ist mit leichtem Schneefall zu rechnen",
                "2": "Schnee"
              },
              "601": {
                "0": "kommt es zu Schnee",
                "1": "ist mit Schnee zu rechnen",
                "2": "Schnee"
              },
              "602": {
                "0": "kommt es zu starkem Schneefall",
                "1": "ist mit starkem Schneefall zu rechnen",
                "2": "Schnee"
              },
              "610": {
                "0": "kommt es zu einem Mix aus Schnee und Regen",
                "1": "ist mit einem Mix aus Schnee und Regen zu rechnen",
                "2": "Schnee"
              },
              "611": {
                "0": "kommt es zu Schneeregen",
                "1": "ist mit Schneeregen zu rechnen",
                "2": "Schneeregen"
              },
              "612": {
                "0": "kommt es zu starkem Schneeregen",
                "1": "ist mit starkem Schneeregen zu rechnen",
                "2": "Schneeregen"
              },
              "621": {
                "0": "kommt es zu Schneeschauer",
                "1": "ist mit Schneeschauern zu rechnen",
                "2": "Schneeschauer"
              },
              "622": {
                "0": "kommt es zu starkem Schneeschauer",
                "1": "ist mit starken Schneeschauern zu rechnen",
                "2": "Schneeschauer"
              },
              "623": {
                "0": "kommt es zu Windböen",
                "1": "ist mit Windböen zu rechnen",
                "2": "windig"
              },
              "700": {
                "0": "kommt es zu Nebel",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "711": {
                "0": "kommt es zu Nebel",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "721": {
                "0": "kommt es zu Dunst",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "731": {
                "0": "kommt es zu Staub in der Luft",
                "1": "ist mit Staub in der Luft zu rechnen",
                "2": "staubig"
              },
              "741": {
                "0": "kommt es zu Nebel",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "751": {
                "0": "kommt es zu Eisnebel",
                "1": "ist mit Eisnebel zu rechnen",
                "2": "Eisnebel"
              },
              "800": {
                "0": "ist der Himmel klar",
                "1": "wird es heiter mit klarem Himmel",
                "2": "heiter"
              },
              "801": {
                "0": "sind nur wenige Wolken am Himmel",
                "1": "ist es leicht bewölkt",
                "2": "leicht bewölkt"
              },
              "802": {
                "0": "sind vereinzelte Wolken am Himmel",
                "1": "ist es vereinzelt bewölkt",
                "2": "leicht bewölkt"
              },
              "803": {
                "0": "ist es bewölkt, vereinzelt kommt die Sonne durch",
                "1": "ist es bewölkt, vereinzelt kommt die Sonne durch",
                "2": "leicht bewölkt"
              },
              "804": {
                "0": "kommt es zu bedecktem Himmel",
                "1": "ist es bewölkt",
                "2": "bewölkt"
              },
              "900": {
                "0": "kommt es zu unbekanntem Niederschlag",
                "1": "ist mit unbekanntem Niederschlag zu rechnen",
                "2": "unbekannt"
              }
            }
          ],
          "choice": [
            "0",
            "1"
          ]
        }
      ]
    },
    {
      "type": "date_now",
      "key": "date",
      "format": "%Y-%m-%d"
    },
    {
      "type": "loop",
      "values": [
        0,
        1,
        2,
        3,
        4,
        5
      ],
      "transform": [
        {
          "type": "calculate",
          "action": "mean",
          "key": "summaries.{_loop}.max_temp",
          "new_key": "temp_avg"
        },
        {
          "type": "calculate",
          "action": "max",
          "key": "summaries.{_loop}.max_temp",
          "new_key": "max_temp"
        },
        {
          "type": "calculate",
          "action": "min",
          "key": "summaries.{_loop}.min_temp",
          "new_key": "min_temp"
        },
        {
          "type": "calculate",
          "action": "mode",
          "key": "summaries.{_loop}.icon",
          "new_key": "common_icon"
        },
        {
          "type": "calculate",
          "action": "mode",
          "key": "summaries.{_loop}.code",
          "new_key": "common_code"
        },
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "max_temp",
            "min_temp",
            "app_min_temp",
            "app_max_temp",
            "rh",
            "pop"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_min_temp",
            "app_max_temp",
            "rh",
            "pop"
          ],
          "count": 0
        },
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "wind_spd"
          ],
          "new_keys": [
            "wind_spd"
          ],
          "count": 2
        }
      ]
    }
  ],
  "images": {
    "wetter1": {
      "type": "pillow",
      "path": "test/test.png",
      "overlay": [
        {
          "type": "text",
          "description": "",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "text": "hallo"
        },
        {
          "type": "api_text",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "pattern": "Test: {kiel.data.0.temp} {config.city}"
        },
        {
          "type": "api_text_array",
          "pos_x": [
            10,
            20,
            30
          ],
          "pos_y": [
            1,
            2,
            7
          ],
          "preset": "wetter1",
          "anchor_point": "config",
          "array_key": "",
          "pattern": "Test: {data.0.temp} {_loop}"
        }
      ]
    },
    "wetter2": {
      "type": "wordcloud"
    }
  },
  "audio": {
    "config": {
      "lang": "de",
      "format": "mp3"
    },
    "audios": {
      "a1": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am heutigen {data|today|weekday} {data|today|code_highest_max} {data|today|city_highest_max}. "
          },
          {
            "type": "text",
            "pattern": "{data|today|city_lowest_max} {data|today|code_lowest_max}. "
          }
        ]
      },
      "a2": {
        "parts": [
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|today|temp_lowest_max} Grad {data|today|city_lowest_max} und {data|today|temp_highest_max} Grad {data|today|city_highest_max}. "
          }
        ]
      },
      "a3": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am morgigen {data|tomorrow|weekday} {data|tomorrow|code_lowest_max} {data|tomorrow|city_lowest_max}. "
          },
          {
            "type": "text",
            "pattern": "{data|tomorrow|city_highest_max} {data|tomorrow|code_highest_max}. "
          }
        ]
      },
      "a4": {
        "parts": [
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|tomorrow|temp_lowest_max} Grad {data|tomorrow|city_lowest_max} und {data|tomorrow|temp_highest_max} Grad {data|tomorrow|city_highest_max}. "
          }
        ]
      },
      "a5": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {data|next_1|weekday} {data|next_1|common_code}.  "
          },
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|next_1|min_temp} Grad {data|next_1|city_min_temp} und {data|next_1|temp_highest_max} Grad {data|next_1|city_highest_max}. "
          }
        ]
      },
      "a6": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {data|next_2|weekday} {data|next_2|common_code}.  "
          },
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|next_2|min_temp} Grad {data|next_2|city_min_temp} und {data|next_2|temp_highest_max} Grad {data|next_2|city_highest_max}.  "
          }
        ]
      },
      "a7": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {data|next_3|weekday} {data|next_3|common_code}.  "
          },
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|next_3|min_temp} Grad {data|next_3|city_min_temp} und {data|next_3|temp_highest_max} Grad {data|next_3|city_highest_max}. "
          }
        ]
      }
    }
  },
  "sequence": [
    {
      "image": "weather1",
      "time": 3,
      "audio": "a1"
    },
    {
      "image": "weather2",
      "time": 3,
      "audio": "a2"
    },
    {
      "image": "weather3",
      "time": 3,
      "audio": "a3"
    },
    {
      "image": "weather4",
      "time": 3,
      "audio": "a4"
    },
    {
      "image": "weather5",
      "time": 3,
      "audio": "a5"
    },
    {
      "image": "weather6",
      "time": 3,
      "audio": "a6"
    },
    {
      "image": "weather7",
      "time": 3,
      "audio": "a7"
    },
    {
      "image": "weather8",
      "time": 3,
      "audio": "a7"
    }
  ],
  "run_config": {
    "testing": {
      "defalt_value": false,
      "possible_values": [
        true,
        false
      ]
    }
  },
  "presets": {
    "wetter1": {
      "color": "#08638",
      "font_size": 5,
      "font": "dosis"
    }
  }
}