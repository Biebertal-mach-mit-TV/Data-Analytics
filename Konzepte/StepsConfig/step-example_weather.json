{
  "id": 0,
  "name": "name",
  "api": [
    {
      "type": "request",
      "api_key_name": "test",
      "url": "https://www.test.de?test1={config_1}&test2=Test2&key={_api_key}"
    },
    {
      "type": "request_multiple",
      "api_key_name": "test",
      "steps_value": [
        "Hallo",
        "Test",
        "Hallo2"
      ],
      "use_loop_as_key": true,
      "url": "https://www.test.de?test={_loop}&test1={config.test}&key={_api_key}&city={config.city}"
    },
    {
      "type": "request_multiple_custom",
      "requests": [
        {
          "type": "request",
          "api_key_name": "test",
          "url": "https://www.test.de?test1={config.test}&test2=Test2&key={_api_key}"
        },
        {
          "type": "request",
          "api_key_name": "test2",
          "url": "https://www.test2.de?test1=hallo"
        }
      ]
    }
  ],
  "transform": [
    {
      "type": "transform_array",
      "array_key": "",
      "transform": [
        {
          "type": "select",
          "relevant_keys": [
            "data"
          ]
        },
        {
          "type": "select_range",
          "sub_key": "data",
          "range_start": 0,
          "range_end": 5
        },
        {
          "type": "transform_array",
          "array_key": "data",
          "transform": [
            {
              "type": "select",
              "array_key": "data",
              "relevant_keys": [
                "valid_date",
                "max_temp",
                "min_temp",
                "app_min_temp",
                "app_max_temp",
                "wind_cdir_full",
                "wind_spd",
                "icon",
                "code",
                "sunrise_ts",
                "sunset_ts",
                "rh",
                "pop"
              ]
            },
            {
              "type": "append",
              "key": "max_temp",
              "new_key": "....summaries.{_idx}.max_temp"
            }
          ]
        },
        {
          "type": "add_symbol",
          "keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp"
          ],
          "pattern": "{text} Grad"
        },
        {
          "type": "add_symbol",
          "keys": [
            "wind_spd"
          ],
          "new_keys": [
            "wind_spd"
          ],
          "pattern": "{text} Metern pro Sekunde"
        },
        {
          "type": "add_symbol",
          "keys": [
            "rh",
            "pop"
          ],
          "new_keys": [
            "rh",
            "pop"
          ],
          "pattern": "{text} Prozent"
        },
        {
          "type": "add_symbol",
          "keys": [
            "city_name"
          ],
          "new_keys": [
            "city_name"
          ],
          "pattern": "in {city_name} "
        },
        {
          "type": "replace",
          "keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp",
            "wind_spd",
            "rh",
            "pop"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp",
            "wind_spd",
            "rh",
            "pop"
          ],
          "old_value": ".",
          "new_value": ",",
          "count": 1
        },
        {
          "type": "date_weekday",
          "keys": [
            "valid_date"
          ],
          "new_keys": [
            "valid_date"
          ],
          "format": "weekday"
        },
        {
          "type": "date_format",
          "keys": [
            "sunset_ts",
            "sunrise_ts"
          ],
          "new_keys": [
            "sunset_ts",
            "sunrise_ts"
          ],
          "format": "%h Uhr %m"
        }
      ]
    },
    {
      "type": "date_now",
      "key": "date",
      "format": "%Y-%m-%d"
    },
    {
      "type": "loop",
      "values": [
        0,
        1,
        2,
        3,
        4,
        5
      ],
      "transform": [
        {
          "type": "calculate",
          "action": "mean",
          "key": "summaries.{_loop}.max_temp",
          "new_key": "temp_avg"
        },
        {
          "type": "calculate",
          "action": "max",
          "key": "summaries.{_loop}.max_temp",
          "new_key": "max_temp"
        },
        {
          "type": "calculate",
          "action": "min",
          "key": "summaries.{_loop}.min_temp",
          "new_key": "min_temp"
        },
        {
          "type": "calculate",
          "action": "mode",
          "key": "summaries.{_loop}.icon",
          "new_key": "common_icon"
        },
        {
          "type": "calculate",
          "action": "mode",
          "key": "summaries.{_loop}.code",
          "new_key": "common_code"
        },
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "max_temp",
            "min_temp",
            "app_min_temp",
            "app_max_temp",
            "rh",
            "pop"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_min_temp",
            "app_max_temp",
            "rh",
            "pop"
          ],
          "count": 0
        },
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "wind_spd"
          ],
          "new_keys": [
            "wind_spd"
          ],
          "count": 2
        }
      ]
    }
  ],
  "images": {
    "wetter1": {
      "type": "pillow",
      "path": "test/test.png",
      "overlay": [
        {
          "type": "text",
          "description": "",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "text": "hallo"
        },
        {
          "type": "api_text",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "pattern": "Test: {kiel.data.0.temp} {config.city}"
        },
        {
          "type": "api_text_array",
          "pos_x": [
            10,
            20,
            30
          ],
          "pos_y": [
            1,
            2,
            7
          ],
          "preset": "wetter1",
          "anchor_point": "config",
          "array_key": "",
          "pattern": "Test: {data.0.temp} {_loop}"
        }
      ]
    },
    "wetter2": {
      "type": "wordcloud"
    }
  },
  "audio": {
    "config": {
      "lang": "de",
      "format": "mp3"
    },
    "audios": {
      "a1": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am heutigen {data|today|weekday} {data|today|code_highest_max} {data|today|city_highest_max}. "
          },
          {
            "type": "text",
            "pattern": "{data|today|city_lowest_max} {data|today|code_lowest_max}. "
          }
        ]
      },
      "a2": {
        "parts": [
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|today|temp_lowest_max} Grad {data|today|city_lowest_max} und {data|today|temp_highest_max} Grad {data|today|city_highest_max}. "
          }
        ]
      },
      "a3": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am morgigen {data|tomorrow|weekday} {data|tomorrow|code_lowest_max} {data|tomorrow|city_lowest_max}. "
          },
          {
            "type": "text",
            "pattern": "{data|tomorrow|city_highest_max} {data|tomorrow|code_highest_max}. "
          }
        ]
      },
      "a4": {
        "parts": [
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|tomorrow|temp_lowest_max} Grad {data|tomorrow|city_lowest_max} und {data|tomorrow|temp_highest_max} Grad {data|tomorrow|city_highest_max}. "
          }
        ]
      },
      "a5": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {data|next_1|weekday} {data|next_1|common_code}.  "
          },
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|next_1|min_temp} Grad {data|next_1|city_min_temp} und {data|next_1|temp_highest_max} Grad {data|next_1|city_highest_max}. "
          }
        ]
      },
      "a6": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {data|next_2|weekday} {data|next_2|common_code}.  "
          },
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|next_2|min_temp} Grad {data|next_2|city_min_temp} und {data|next_2|temp_highest_max} Grad {data|next_2|city_highest_max}.  "
          }
        ]
      },
      "a7": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {data|next_3|weekday} {data|next_3|common_code}.  "
          },
          {
            "type": "text",
            "pattern": "Die Temperaturen liegen zwischen {data|next_3|min_temp} Grad {data|next_3|city_min_temp} und {data|next_3|temp_highest_max} Grad {data|next_3|city_highest_max}. "
          }
        ]
      }
    }
  },
  "sequence": [
    {
      "image": "wetter1",
      "time": 3,
      "audio": "a1"
    },
    {
      "image": "wetter2",
      "time": 10
    }
  ],
  "run_config": {
    "testing": {
      "defalt_value": false,
      "possible_values": [
        true,
        false
      ]
    }
  },
  "presets": {
    "wetter1": {
      "color": "#08638",
      "font_size": 5,
      "font": "dosis"
    }
  }
}