{
  "id": 0,
  "name": "name",
  "api": [
    {
      "type": "request",
      "api_key_name": "test",
      "url": "https://www.test.de?test1={config_1}&test2=Test2&key={_api_key}"
    }
  ],
  "transform": [
    {
      "type": "transform_array",
      "array_key": "_req",
      "transform": [
        {
          "type": "select",
          "relevant_keys": [
            "_loop|data"
          ]
        },
        {
          "type": "select_range",
          "sub_key": "data",
          "range_start": 0,
          "range_end": 5
        },
        {
          "type": "transform_array",
          "array_key": "data",
          "transform": [
            {
              "type": "select",
              "array_key": "data",
              "relevant_keys": [
                "_loop|valid_date",
                "_loop|max_temp",
                "_loop|min_temp",
                "_loop|app_min_temp",
                "_loop|app_max_temp",
                "_loop|wind_cdir_full",
                "_loop|wind_spd",
                "_loop|icon",
                "_loop|code",
                "_loop|sunrise_ts",
                "_loop|sunset_ts",
                "_loop|rh",
                "_loop|pop"
              ]
            },
            {
              "type": "append",
              "key": "valid_date",
              "new_key": "{_idx}|valid_date"
            },
            {
              "type": "append",
              "key": "max_temp",
              "new_key": "{_idx}|max_temp"
            },
            {
              "type": "append",
              "key": "min_temp",
              "new_key": "{_idx}|min_temp"
            },
            {
              "type": "append",
              "key": "app_min_temp",
              "new_key": "{_idx}|app_min_temp"
            },
            {
              "type": "append",
              "key": "app_max_temp",
              "new_key": "{_idx}|app_max_temp"
            },
            {
              "type": "append",
              "key": "wind_cdir_full",
              "new_key": "{_idx}|max_temp"
            },
            {
              "type": "append",
              "key": "wind_spd",
              "new_key": "{_idx}|max_temp"
            },
            {
              "type": "append",
              "key": "icon",
              "new_key": "{_idx}|icon"
            },
            {
              "type": "append",
              "key": "code",
              "new_key": "{_idx}|code"
            },
            {
              "type": "append",
              "key": "sunrise_ts",
              "new_key": "{_idx}|sunrise_ts"
            },
            {
              "type": "append",
              "key": "rh",
              "new_key": "{_idx}|rh"
            },
            {
              "type": "append",
              "key": "pop",
              "new_key": "{_idx}|pop"
            }
          ]
        },
        {
          "type": "add_symbol",
          "keys": [
            "_loop|max_temp",
            "_loop|min_temp",
            "_loop|app_max_temp",
            "_loop|app_min_temp"
          ],
          "new_keys": [
            "_loop|str_max_temp",
            "_loop|str_min_temp",
            "_loop|str_app_max_temp",
            "_loop|str_app_min_temp"
          ],
          "pattern": "{_key} Grad"
        },
        {
          "type": "add_symbol",
          "keys": [
            "_loop|wind_spd"
          ],
          "new_keys": [
            "_loop|wind_spd"
          ],
          "pattern": "{_key} Metern pro Sekunde"
        },
        {
          "type": "add_symbol",
          "keys": [
            "_loop|rh",
            "_loop|pop"
          ],
          "new_keys": [
            "_loop|str_rh",
            "_loop|str_pop"
          ],
          "pattern": "{_key} Prozent"
        },
        {
          "type": "add_symbol",
          "keys": [
            "_loop|city_name"
          ],
          "new_keys": [
            "_loop|str_city_name"
          ],
          "pattern": "in {_key} "
        },
        {
          "type": "replace",
          "keys": [
            "_loop|max_temp",
            "_loop|min_temp",
            "_loop|app_max_temp",
            "_loop|app_min_temp",
            "_loop|wind_spd",
            "_loop|rh",
            "_loop|pop"
          ],
          "old_value": ".",
          "new_value": ",",
          "count": 1
        },
        {
          "type": "date_weekday",
          "keys": [
            "_loop|valid_date"
          ],
          "new_keys": [
            "_loop|str_valid_date"
          ],
          "format": "weekday"
        },
        {
          "type": "date_format",
          "keys": [
            "_loop|sunset_ts",
            "_loop|sunrise_ts"
          ],
          "new_keys": [
            "_loop|str_sunset_ts",
            "_loop|str_sunrise_ts"
          ],
          "format": "%h Uhr %m"
        },
        {
          "type": "wind_direction",
          "key": "_loop|wind_cdir_full",
          "new_key": "_loop|str_wind_cdir_full",
          "dict": [
            {
              "west": {
                "0": "West",
                "1": "Westen"
              },
              "southwest": {
                "0": "Südwest",
                "1": "Südwesten"
              },
              "northwest": {
                "0": "Nordwest",
                "1": "Nordwesten"
              },
              "south": {
                "0": "Süd",
                "1": "Süden"
              },
              "east": {
                "0": "Ost",
                "1": "Osten"
              },
              "southeast": {
                "0": "Südost",
                "1": "Südosten"
              },
              "northeast": {
                "0": "Nordost",
                "1": "Nordosten"
              },
              "north": {
                "0": "Nord",
                "1": "Norden"
              }
            }
          ],
          "delimiter": "-"
        },
        {
          "type": "choose_random",
          "keys": [
            "_loop|code"
          ],
          "new_keys": [
            "_loop|str_code"
          ],
          "dict": [
            {
              "200": {
                "0": "kommt es zu Gewittern mit leichtem Regen",
                "1": "ist mit Gewitter und leichtem Regen zu rechnen",
                "2": "Gewitter"
              },
              "201": {
                "0": "kommt es zu Gewittern mit Regen",
                "1": "ist mit Gewitter und Regen zu rechnen",
                "2": "Gewitter"
              },
              "202": {
                "0": "kommt es zu Gewittern mit starkem Regen",
                "1": "ist mit Gewitter und starkem Regen zu rechnen",
                "2": "Gewitter"
              },
              "230": {
                "0": "kommt es zu Gewittern mit leichtem Nieselregen",
                "1": "ist mit Gewitter und leichtem Nieselregen zu rechnen",
                "2": "Gewitter"
              },
              "231": {
                "0": "kommt es zu Gewittern mit Nieselregen",
                "1": "ist mit Gewitter und Nieselregen zu rechnen",
                "2": "Gewitter"
              },
              "232": {
                "0": "kommt es zu Gewittern mit starkem Nieselregen",
                "1": "ist mit Gewitter und starkem Nieselregen zu rechnen",
                "2": "Gewitter"
              },
              "233": {
                "0": "kommt es zu Gewittern mit Hagel",
                "1": "ist mit Gewitter und Hagel zu rechnen",
                "2": "Gewitter"
              },
              "300": {
                "0": "kommt es zu leichtem Nieselregen",
                "1": "ist mit leichtem Nieselregen zu rechnen",
                "2": "regnerisch"
              },
              "301": {
                "0": "kommt es zu Nieselregen",
                "1": "ist mit Nieselregen zu rechnen",
                "2": "Nieselregen"
              },
              "302": {
                "0": "kommt es zu starkem Nieselregen",
                "1": "ist mit starkem Nieselregen zu rechnen",
                "2": "regnerisch"
              },
              "500": {
                "0": "kommt es zu leichtem Regen",
                "1": "ist es leicht regnerisch",
                "2": "Regen"
              },
              "501": {
                "0": "kommt es zu mäßigem Regen",
                "1": "ist es regnerisch",
                "2": "Regen"
              },
              "502": {
                "0": "kommt es zu starkem Regen",
                "1": "ist es stark regnerisch",
                "2": "Regen"
              },
              "511": {
                "0": "kommt es zu Eisregen",
                "1": "ist mit Eisregen zu rechnen",
                "2": "Eisregen"
              },
              "520": {
                "0": "kommt es zu leichtem Regenschauer",
                "1": "ist mit leichten Regenschauern zu rechnen",
                "2": "Regenschauer"
              },
              "521": {
                "0": "kommt es zu Regenschauer",
                "1": "ist mit Regenschauern zu rechnen",
                "2": "Regenschauer"
              },
              "522": {
                "0": "kommt es zu starkem Regenschauer",
                "1": "ist mit starken Regenschauern zu rechnen",
                "2": "Regenschauer"
              },
              "600": {
                "0": "kommt es zu leichtem Schneefall",
                "1": "ist mit leichtem Schneefall zu rechnen",
                "2": "Schnee"
              },
              "601": {
                "0": "kommt es zu Schnee",
                "1": "ist mit Schnee zu rechnen",
                "2": "Schnee"
              },
              "602": {
                "0": "kommt es zu starkem Schneefall",
                "1": "ist mit starkem Schneefall zu rechnen",
                "2": "Schnee"
              },
              "610": {
                "0": "kommt es zu einem Mix aus Schnee und Regen",
                "1": "ist mit einem Mix aus Schnee und Regen zu rechnen",
                "2": "Schnee"
              },
              "611": {
                "0": "kommt es zu Schneeregen",
                "1": "ist mit Schneeregen zu rechnen",
                "2": "Schneeregen"
              },
              "612": {
                "0": "kommt es zu starkem Schneeregen",
                "1": "ist mit starkem Schneeregen zu rechnen",
                "2": "Schneeregen"
              },
              "621": {
                "0": "kommt es zu Schneeschauer",
                "1": "ist mit Schneeschauern zu rechnen",
                "2": "Schneeschauer"
              },
              "622": {
                "0": "kommt es zu starkem Schneeschauer",
                "1": "ist mit starken Schneeschauern zu rechnen",
                "2": "Schneeschauer"
              },
              "623": {
                "0": "kommt es zu Windböen",
                "1": "ist mit Windböen zu rechnen",
                "2": "windig"
              },
              "700": {
                "0": "kommt es zu Nebel",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "711": {
                "0": "kommt es zu Nebel",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "721": {
                "0": "kommt es zu Dunst",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "731": {
                "0": "kommt es zu Staub in der Luft",
                "1": "ist mit Staub in der Luft zu rechnen",
                "2": "staubig"
              },
              "741": {
                "0": "kommt es zu Nebel",
                "1": "ist mit Nebel zu rechnen",
                "2": "nebelig"
              },
              "751": {
                "0": "kommt es zu Eisnebel",
                "1": "ist mit Eisnebel zu rechnen",
                "2": "Eisnebel"
              },
              "800": {
                "0": "ist der Himmel klar",
                "1": "wird es heiter mit klarem Himmel",
                "2": "heiter"
              },
              "801": {
                "0": "sind nur wenige Wolken am Himmel",
                "1": "ist es leicht bewölkt",
                "2": "leicht bewölkt"
              },
              "802": {
                "0": "sind vereinzelte Wolken am Himmel",
                "1": "ist es vereinzelt bewölkt",
                "2": "leicht bewölkt"
              },
              "803": {
                "0": "ist es bewölkt, vereinzelt kommt die Sonne durch",
                "1": "ist es bewölkt, vereinzelt kommt die Sonne durch",
                "2": "leicht bewölkt"
              },
              "804": {
                "0": "kommt es zu bedecktem Himmel",
                "1": "ist es bewölkt",
                "2": "bewölkt"
              },
              "900": {
                "0": "kommt es zu unbekanntem Niederschlag",
                "1": "ist mit unbekanntem Niederschlag zu rechnen",
                "2": "unbekannt"
              }
            }
          ],
          "choice": [
            "0",
            "1"
          ]
        }
      ]
    },
    {
      "type": "date_now",
      "key": "_loop|date",
      "format": "%Y-%m-%d"
    },
    {
      "type": "loop",
      "values": [
        0,
        1,
        2,
        3,
        4,
        5
      ],
      "transform": [
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "_loop|max_temp",
            "_loop|min_temp",
            "_loop|app_min_temp",
            "_loop|app_max_temp",
            "_loop|rh",
            "_loop|pop"
          ],
          "count": 0
        },
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "_loop|wind_spd"
          ],
          "count": 2
        }
      ]
    }
  ],
  "images": {
    "wetter1": {
      "type": "pillow",
      "path": "test/test.png",
      "overlay": [
        {
          "type": "text",
          "description": "",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "text": "hallo"
        },
        {
          "type": "api_text",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "pattern": "Test: {kiel.data.0.temp} {config.city}"
        },
        {
          "type": "api_text_array",
          "pos_x": [
            10,
            20,
            30
          ],
          "pos_y": [
            1,
            2,
            7
          ],
          "preset": "wetter1",
          "anchor_point": "config",
          "array_key": "",
          "pattern": "Test: {data.0.temp} {_loop}"
        }
      ]
    },
    "wetter2": {
      "type": "wordcloud"
    }
  },
  "audio": {
    "config": {
      "lang": "de",
      "format": "mp3"
    },
    "audios": {
      "a1": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am heutigen {date} {data|code}. Die Höchstwerte erreichen in {city_name} {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Tiefstwerte liegen bei {data|min_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die gefühlten Temperaturen liegen zwischen {data|app_min_temp} und {data|app_max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop} und die relative Luftfeuchtigkeit bei {data|rh}. "
          },
          {
            "type": "text",
            "pattern": "Der Wind erreicht heute Geschwindigkeiten von {data|wind_spd} und kommt aus Richtung {data|wind_cdir_full}. "
          },
          {
            "type": "text",
            "pattern": "Die Sonne geht heute um {data|sunset_ts} unter und geht morgen um {data|sunrise_ts} wieder auf. "
          }
        ]
      },
      "a2": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am morgigen {date} {data|code}. Die Höchstwerte erreichen in {city_name} {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Tiefstwerte liegen bei {data|min_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die gefühlten Temperaturen liegen zwischen {data|app_min_temp} und {data|app_max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop} und die relative Luftfeuchtigkeit bei {data|rh}. "
          },
          {
            "type": "text",
            "pattern": "Der Wind erreicht morgen Geschwindigkeiten von {data|wind_spd} und kommt aus Richtung {data|wind_cdir_full}. "
          }
        ]
      },
      "a3": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {date} {data.code} bei Temperaturen von {data|min_temp} bis {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop}. Der Wind erreicht Geschwindigkeiten von {data|wind_spd}. "
          }
        ]
      },
      "a4": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {date} {data.code} bei Temperaturen von {data|min_temp} bis {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop}. Der Wind erreicht Geschwindigkeiten von {data|wind_spd}. "
          }
        ]
      },
      "a5": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {date} {data|code} bei Temperaturen von {data|min_temp} bis {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop}. Der Wind erreicht Geschwindigkeiten von {data|wind_spd}. "
          }
        ]
      }
    }
  },
  "sequence": [
    {
      "image": "weather1",
      "time": 3,
      "audio": "a1"
    },
    {
      "image": "weather2",
      "time": 10,
      "audio": "a2"
    },
    {
      "image": "weather3",
      "time": 10,
      "audio": "a3"
    },
    {
      "image": "weather4",
      "time": 10,
      "audio": "a4"
    },
    {
      "image": "weather5",
      "time": 10,
      "audio": "a5"
    },
    {
      "image": "weather6",
      "time": 10,
      "audio": "a5"
    },
    {
      "image": "weather7",
      "time": 10,
      "audio": "a5"
    }
  ],
  "run_config": {
    "testing": {
      "defalt_value": false,
      "possible_values": [
        true,
        false
      ]
    }
  },
  "presets": {
    "wetter1": {
      "color": "#08638",
      "font_size": 5,
      "font": "dosis"
    }
  }
}