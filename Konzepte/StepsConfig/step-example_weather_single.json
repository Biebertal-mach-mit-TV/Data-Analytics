{
  "id": 0,
  "name": "name",
  "api": [
    {
      "type": "request",
      "api_key_name": "test",
      "url": "https://www.test.de?test1={config_1}&test2=Test2&key={_api_key}"
    },
    {
      "type": "request_multiple",
      "api_key_name": "test",
      "steps_value": [
        "Hallo",
        "Test",
        "Hallo2"
      ],
      "use_loop_as_key": true,
      "url": "https://www.test.de?test={_loop}&test1={config.test}&key={_api_key}&city={config.city}"
    },
    {
      "type": "request_multiple_custom",
      "requests": [
        {
          "type": "request",
          "api_key_name": "test",
          "url": "https://www.test.de?test1={config.test}&test2=Test2&key={_api_key}"
        },
        {
          "type": "request",
          "api_key_name": "test2",
          "url": "https://www.test2.de?test1=hallo"
        }
      ]
    }
  ],
  "transform": [
    {
      "type": "transform_array",
      "array_key": "",
      "transform": [
        {
          "type": "select",
          "relevant_keys": [
            "data"
          ]
        },
        {
          "type": "select_range",
          "sub_key": "data",
          "range_start": 0,
          "range_end": 5
        },
        {
          "type": "transform_array",
          "array_key": "data",
          "transform": [
            {
              "type": "select",
              "array_key": "data",
              "relevant_keys": [
                "valid_date",
                "max_temp",
                "min_temp",
                "app_min_temp",
                "app_max_temp",
                "wind_cdir_full",
                "wind_spd",
                "icon",
                "code",
                "sunrise_ts",
                "sunset_ts",
                "rh",
                "pop"
              ]
            },
            {
              "type": "append",
              "key": "valid_date",
              "new_key": "....preprocess_single.{_idx}.valid_date"
            },
            {
              "type": "append",
              "key": "max_temp",
              "new_key": "....preprocess_single.{_idx}.max_temp"
            },
            {
              "type": "append",
              "key": "min_temp",
              "new_key": "....preprocess_single.{_idx}.min_temp"
            },
            {
              "type": "append",
              "key": "app_min_temp",
              "new_key": "....preprocess_single.{_idx}.app_min_temp"
            },
            {
              "type": "append",
              "key": "app_max_temp",
              "new_key": "....preprocess_single.{_idx}.app_max_temp"
            },
            {
              "type": "append",
              "key": "wind_cdir_full",
              "new_key": "....preprocess_single.{_idx}.max_temp"
            },
            {
              "type": "append",
              "key": "wind_spd",
              "new_key": "....preprocess_single.{_idx}.max_temp"
            },
            {
              "type": "append",
              "key": "icon",
              "new_key": "....preprocess_single.{_idx}.icon"
            },
            {
              "type": "append",
              "key": "code",
              "new_key": "....preprocess_single.{_idx}.code"
            },
            {
              "type": "append",
              "key": "sunrise_ts",
              "new_key": "....preprocess_single.{_idx}.sunrise_ts"
            },
            {
              "type": "append",
              "key": "rh",
              "new_key": "....preprocess_single.{_idx}.rh"
            },
            {
              "type": "append",
              "key": "pop",
              "new_key": "....preprocess_single.{_idx}.pop"
            }
          ]
        },
        {
          "type": "add_symbol",
          "keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp"
          ],
          "pattern": "{text} Grad"
        },
        {
          "type": "add_symbol",
          "keys": [
            "wind_spd"
          ],
          "new_keys": [
            "wind_spd"
          ],
          "pattern": "{text} Metern pro Sekunde"
        },
        {
          "type": "add_symbol",
          "keys": [
            "rh",
            "pop"
          ],
          "new_keys": [
            "rh",
            "pop"
          ],
          "pattern": "{text} Prozent"
        },
        {
          "type": "add_symbol",
          "keys": [
            "city_name"
          ],
          "new_keys": [
            "city_name"
          ],
          "pattern": "in {city_name} "
        },
        {
          "type": "replace",
          "keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp",
            "wind_spd",
            "rh",
            "pop"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_max_temp",
            "app_min_temp",
            "wind_spd",
            "rh",
            "pop"
          ],
          "old_value": ".",
          "new_value": ",",
          "count": 1
        },
        {
          "type": "date_weekday",
          "keys": [
            "valid_date"
          ],
          "new_keys": [
            "valid_date"
          ],
          "format": "weekday"
        },
        {
          "type": "date_format",
          "keys": [
            "sunset_ts",
            "sunrise_ts"
          ],
          "new_keys": [
            "sunset_ts",
            "sunrise_ts"
          ],
          "format": "%h Uhr %m"
        }
      ]
    },
    {
      "type": "date_now",
      "key": "date",
      "format": "%Y-%m-%d"
    },
    {
      "type": "loop",
      "values": [
        0,
        1,
        2,
        3,
        4,
        5
      ],
      "transform": [
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "max_temp",
            "min_temp",
            "app_min_temp",
            "app_max_temp",
            "rh",
            "pop"
          ],
          "new_keys": [
            "max_temp",
            "min_temp",
            "app_min_temp",
            "app_max_temp",
            "rh",
            "pop"
          ],
          "count": 0
        },
        {
          "type": "calculate",
          "action": "round",
          "keys": [
            "wind_spd"
          ],
          "new_keys": [
            "wind_spd"
          ],
          "count": 2
        }
      ]
    }
  ],
  "images": {
    "wetter1": {
      "type": "pillow",
      "path": "test/test.png",
      "overlay": [
        {
          "type": "text",
          "description": "",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "text": "hallo"
        },
        {
          "type": "api_text",
          "pos_x": 10,
          "pos_y": 2,
          "preset": "wetter1",
          "anchor_point": "center",
          "pattern": "Test: {kiel.data.0.temp} {config.city}"
        },
        {
          "type": "api_text_array",
          "pos_x": [
            10,
            20,
            30
          ],
          "pos_y": [
            1,
            2,
            7
          ],
          "preset": "wetter1",
          "anchor_point": "config",
          "array_key": "",
          "pattern": "Test: {data.0.temp} {_loop}"
        }
      ]
    },
    "wetter2": {
      "type": "wordcloud"
    }
  },
  "audio": {
    "config": {
      "lang": "de",
      "format": "mp3"
    },
    "audios": {
      "a1": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am heutigen {date} {data|code}. Die Höchstwerte erreichen in {city_name} {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Tiefstwerte liegen bei {data|min_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die gefühlten Temperaturen liegen zwischen {data|app_min_temp} und {data|app_max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop} und die relative Luftfeuchtigkeit bei {data|rh}. "
          },
          {
            "type": "text",
            "pattern": "Der Wind erreicht heute Geschwindigkeiten von {data|wind_spd} und kommt aus Richtung {data|wind_cdir_full}. "
          },
          {
            "type": "text",
            "pattern": "Die Sonne geht heute um {data|sunset_ts} unter und geht morgen um {data|sunrise_ts} wieder auf. "
          }
        ]
      },
      "a2": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am morgigen {date} {data|code}. Die Höchstwerte erreichen in {city_name} {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Tiefstwerte liegen bei {data|min_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die gefühlten Temperaturen liegen zwischen {data|app_min_temp} und {data|app_max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop} und die relative Luftfeuchtigkeit bei {data|rh}. "
          },
          {
            "type": "text",
            "pattern": "Der Wind erreicht morgen Geschwindigkeiten von {data|wind_spd} und kommt aus Richtung {data|wind_cdir_full}. "
          }
        ]
      },
      "a3": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {date} {data.code} bei Temperaturen von {data|min_temp} bis {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop}. Der Wind erreicht Geschwindigkeiten von {data|wind_spd}. "
          }
        ]
      },
      "a4": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {date} {data.code} bei Temperaturen von {data|min_temp} bis {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop}. Der Wind erreicht Geschwindigkeiten von {data|wind_spd}. "
          }
        ]
      },
      "a5": {
        "parts": [
          {
            "type": "text",
            "pattern": "Am {date} {data|code} bei Temperaturen von {data|min_temp} bis {data|max_temp}. "
          },
          {
            "type": "text",
            "pattern": "Die Regenwahrscheinlichkeit liegt am {date} bei {data|pop}. Der Wind erreicht Geschwindigkeiten von {data|wind_spd}. "
          }
        ]
      }
    }
  },
  "sequence": [
    {
      "image": "wetter1",
      "time": 3,
      "audio": "a1"
    },
    {
      "image": "wetter2",
      "time": 10
    }
  ],
  "run_config": {
    "testing": {
      "defalt_value": false,
      "possible_values": [
        true,
        false
      ]
    }
  },
  "presets": {
    "wetter1": {
      "color": "#08638",
      "font_size": 5,
      "font": "dosis"
    }
  }
}